{"remainingRequest":"/Users/lijiahao/git-test/meiduo/meiduo_mall_frontend/node_modules/thread-loader/dist/cjs.js!/Users/lijiahao/git-test/meiduo/meiduo_mall_frontend/node_modules/babel-loader/lib/index.js!/Users/lijiahao/git-test/meiduo/meiduo_mall_frontend/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/lijiahao/git-test/meiduo/meiduo_mall_frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lijiahao/git-test/meiduo/meiduo_mall_frontend/src/views/Cart.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/lijiahao/git-test/meiduo/meiduo_mall_frontend/src/views/Cart.vue","mtime":1762018358299},{"path":"/Users/lijiahao/git-test/meiduo/meiduo_mall_frontend/babel.config.js","mtime":1762018358253},{"path":"/Users/lijiahao/git-test/meiduo/meiduo_mall_frontend/node_modules/cache-loader/dist/cjs.js","mtime":1762102178152},{"path":"/Users/lijiahao/git-test/meiduo/meiduo_mall_frontend/node_modules/thread-loader/dist/cjs.js","mtime":1762102178152},{"path":"/Users/lijiahao/git-test/meiduo/meiduo_mall_frontend/node_modules/babel-loader/lib/index.js","mtime":1762102182065},{"path":"/Users/lijiahao/git-test/meiduo/meiduo_mall_frontend/node_modules/cache-loader/dist/cjs.js","mtime":1762102178152},{"path":"/Users/lijiahao/git-test/meiduo/meiduo_mall_frontend/node_modules/vue-loader/lib/index.js","mtime":1762102181323}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLml0ZXJhdG9yLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuaXRlcmF0b3IuZm9yLWVhY2guanMiOwovKiBlc2xpbnQtZGlzYWJsZSAqLwppbXBvcnQgQ29udGFpbmVyIGZyb20gIkAvY29tcG9uZW50cy9Db250YWluZXIudnVlIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJDYXJ0IiwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgLy8g5p+l6K+i57uT5p6cCiAgICAgIHNrdXM6IFtdLAogICAgICAvLyDmiYDmnInllYblk4HmgLvku7flj4rmlbDph48KICAgICAgdG90YWxfcHJpY2U6IDAsCiAgICAgIGNvdW50OiAwLAogICAgICAvLyDpgInkuK3nmoRza3UKICAgICAgc2VsZWN0ZWRfc2t1czogW10KICAgIH07CiAgfSwKICBtb3VudGVkKCkgewogICAgdGhpcy5nZXRfY2FydCgpOwogIH0sCiAgbWV0aG9kczogewogICAgLy8g6I635Y+W6LSt54mp6L2m5L+h5oGvCiAgICBnZXRfY2FydCgpIHsKICAgICAgbGV0IHRoYXQgPSB0aGlzOwogICAgICB0aGF0LiRheGlvcy5nZXQoImNhcnQvIikudGhlbihyZXMgPT4gewogICAgICAgIHRoYXQuc2t1cyA9IHJlcy5kYXRhOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDli77pgInkuovku7YKICAgIGhhbmRsZVNlbGVjdGlvbkNoYW5nZShyb3dzKSB7CiAgICAgIHRoaXMuY291bnQgPSAwOwogICAgICB0aGlzLnRvdGFsX3ByaWNlID0gMDsKICAgICAgdGhpcy5zZWxlY3RlZF9za3VzID0gcm93czsKICAgICAgcm93cy5mb3JFYWNoKHZhbHVlID0+IHsKICAgICAgICB0aGlzLnRvdGFsX3ByaWNlICs9IHZhbHVlLmNvdW50ICogdmFsdWUucHJpY2U7CiAgICAgICAgdGhpcy5jb3VudCArPSB2YWx1ZS5jb3VudDsKICAgICAgfSk7CiAgICB9LAogICAgLy8g6KGo5qC86KGM54K55Ye75LqL5Lu277yM54K55Ye76KGM5bCx5Y+W5raI5Yu+6YCJ54q25oCB5bm256uL5Y2z5YaN5qyh5Yu+6YCJ77yM5Li65LqG5Ye65Y+RaGFuZGxlU2VsZWN0aW9uQ2hhbmdlCiAgICBoYW5kbGVSb3dDbGljayhyb3cpIHsKICAgICAgdGhpcy4kcmVmcy5za3VMaXN0LnRvZ2dsZVJvd1NlbGVjdGlvbihyb3csIGZhbHNlKTsKICAgICAgLy8gdGhpcy4kcmVmcy5za3VMaXN0LnRvZ2dsZVJvd1NlbGVjdGlvbihyb3csIHRydWUpOwogICAgfSwKICAgIC8vIOS/ruaUuei0reeJqei9puS/oeaBr++8jCDliKnnlKhhc3luYyDlkowgYXdhaXQg5a6e546w5ZCM5q2l6K+35rGCCiAgICBlZGl0X2NhcnQ6IGZ1bmN0aW9uIChyb3cpIHsKICAgICAgLy8g5YeG5aSH5pWw5o2uCiAgICAgIGxldCByZXF1ZXN0X2RhdGEgPSB7CiAgICAgICAgc2t1X2lkOiByb3cuaWQsCiAgICAgICAgY291bnQ6IHJvdy5jb3VudCwKICAgICAgICBzcGVjOiByb3cuc3BlYwogICAgICB9OwogICAgICB0aGlzLiRheGlvcy5wdXQoImNhcnQvIiwgewogICAgICAgIGRhdGE6IHJlcXVlc3RfZGF0YQogICAgICB9KTsKICAgIH0sCiAgICAvLyDliKDpmaTotK3nianovaborrDlvZUKICAgIGRlbGV0ZV9jYXJ0KHJvdykgewogICAgICB0aGlzLiRheGlvcy5kZWxldGUoImNhcnQvIiwgewogICAgICAgIGRhdGE6IHJvdwogICAgICB9KS50aGVuKHJlcyA9PiB7CiAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT0gMjAwKSB7CiAgICAgICAgICB0aGlzLmdldF9jYXJ0KCk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICAvLyDot7Povazoh7Pmj5DkuqTorqLljZXpobXpnaIKICAgIHRvX2NyZWF0ZV9vcmRlcigpIHsKICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRfc2t1cy5sZW5ndGggPT0gMCkgewogICAgICAgIHRoaXMuJG5vdGlmeS53YXJuaW5nKHsKICAgICAgICAgIHRpdGxlOiAi6K+35YWI6YCJ5oup6ZyA6KaB6LSt5Lmw55qE5ZWG5ZOBIgogICAgICAgIH0pOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBpZiAodGhpcy4kc3RvcmUuc3RhdGUudG9rZW4gPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgdGhpcy4kbm90aWZ5Lndhcm5pbmcoewogICAgICAgICAgdGl0bGU6ICLor7flhYjnmbvpmYYiCiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICAvLyDlh4blpIfmlbDmja4KICAgICAgbGV0IHJlcXVlc3RfZGF0YSA9IFtdOwogICAgICB0aGlzLnNlbGVjdGVkX3NrdXMuZm9yRWFjaCgodmFsdWUsIGluZGV4KSA9PiB7CiAgICAgICAgbGV0IHNrdSA9IHt9OwogICAgICAgIHNrdS5za3VfaWQgPSB2YWx1ZS5pZDsKICAgICAgICBza3Uuc3BlYyA9IHZhbHVlLnNwZWM7CiAgICAgICAgcmVxdWVzdF9kYXRhW2luZGV4XSA9IHNrdTsKICAgICAgfSk7CiAgICAgIGxldCBwYXJhbXMgPSB7CiAgICAgICAgc2t1czogcmVxdWVzdF9kYXRhCiAgICAgIH07CiAgICAgIHRoaXMuJGFwaS5zZWxlY3RzKHBhcmFtcykudGhlbihyZXMgPT4gewogICAgICAgIGlmIChyZXMuc3RhdHVzID09IDIwMSkgewogICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgICBuYW1lOiAiY3JlYXRlX29yZGVyIgogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9LAogIGNvbXBvbmVudHM6IHsKICAgIENvbnRhaW5lcgogIH0sCiAgd2F0Y2g6IHt9Cn07"},{"version":3,"names":["Container","name","data","skus","total_price","count","selected_skus","mounted","get_cart","methods","that","$axios","get","then","res","handleSelectionChange","rows","forEach","value","price","handleRowClick","row","$refs","skuList","toggleRowSelection","edit_cart","request_data","sku_id","id","spec","put","delete_cart","delete","status","to_create_order","length","$notify","warning","title","$store","state","token","undefined","index","sku","params","$api","selects","$router","push","components","watch"],"sources":["src/views/Cart.vue"],"sourcesContent":["<template>\n  <Container>\n    <el-divider></el-divider>\n    <el-row>\n      <el-col :span=\"2\">\n        <pre style=\"margin:0; padding: 0;\">&nbsp;</pre>\n      </el-col>\n      <el-col :span=\"20\">\n        <div class=\"title\">\n          <p style=\"font-size: 1.2em; color: red;\">\n            <span class=\"el-icon-shopping-cart-full\">商品清单</span>\n          </p>\n        </div>\n      </el-col>\n    </el-row>\n    <!-- 详情展示区 -->\n    <el-row>\n      <el-col :span=\"2\">\n        <pre style=\"margin:0; padding: 0;\">&nbsp;</pre>\n      </el-col>\n      <el-col :span=\"20\">\n        <div class=\"detail\">\n          <div>\n            <!-- 商品展示 -->\n            <el-table\n              :data=\"skus\"\n              size=\"mini\"\n              height=\"40em\"\n              highlight-cuurent-row\n              ref=\"skuList\"\n              :header-cell-style=\"{background:'#eef1f6',color:'#606266'}\"\n              :header-row-style=\"{height:'5em'}\"\n              @selection-change=\"handleSelectionChange\"\n              @row-click=\"handleRowClick\"\n            >\n              <el-table-column type=\"selection\" align=\"center\"></el-table-column>\n              <el-table-column width=\"150\" align=\"center\">\n                <template slot-scope=\"scope\">\n                  <el-image :src=\"scope.row.default_image_url\" style=\"width: 8em; height: 8em;\"></el-image>\n                </template>\n              </el-table-column>\n              <el-table-column prop=\"name\" label=\"商品名称\" width=\"300\" align=\"center\"></el-table-column>\n              <el-table-column prop=\"spec\" label=\"规格\" width=\"150\" align=\"center\"></el-table-column>\n              <el-table-column prop=\"price\" label=\"价格\" width=\"100\" align=\"center\"></el-table-column>\n              <el-table-column label=\"数量\" width=\"180\" align=\"center\">\n                <template slot-scope=\"scope\">\n                  <el-input-number\n                    v-model=\"scope.row.count\"\n                    :min=\"1\"\n                    :max=\"scope.row.stock\"\n                    size=\"mini\"\n                    @change=\"edit_cart(scope.row)\"\n                  ></el-input-number>\n                </template>\n              </el-table-column>\n              <el-table-column label=\"小计\" width=\"120\" align=\"center\">\n                <!-- 保留两位小数 -->\n                <template\n                  slot-scope=\"scope\"\n                >{{ (scope.row.count * scope.row.price).toFixed(2) }} &nbsp;元</template>\n              </el-table-column>\n              <el-table-column label=\"操作\" align=\"center\">\n                <template slot-scope=\"scope\">\n                  <el-button\n                    type=\"danger\"\n                    icon=\"el-icon-delete\"\n                    size=\"mini\"\n                    @click=\"delete_cart(scope.row)\"\n                  >删除</el-button>\n                </template>\n              </el-table-column>\n            </el-table>\n          </div>\n          <!-- 结算栏 -->\n          <div class=\"account\">\n            <el-col :span=\"15\">\n              <el-col :span=\"2\">\n                <pre style=\"margin:0; padding: 0;\">&nbsp;</pre>\n              </el-col>\n              <el-col :span=\"4\">\n                <p style=\"font-size: 1.5em;color: red;\">结&nbsp;算</p>\n              </el-col>\n            </el-col>\n            <el-col :span=\"4\">\n              <p style=\"text-align: right;\">\n                <span style=\"font-size: 0.5em;\">合计（不含运费）：</span>\n                <span style=\"font-size: 0.5em; color: red;\">¥ &nbsp;</span>\n                <span style=\"font-size: 1.2em; color: red;\">{{ total_price }}</span>\n              </p>\n              <p style=\"font-size: 0.5em; text-align: right;\">\n                <span>共计</span>\n                <span style=\"color: red;\">&nbsp;{{ count }}&nbsp;</span>\n                <span>件商品</span>\n              </p>\n            </el-col>\n            <el-col :span=\"1\">\n              <pre style=\"margin:0; padding: 0;\">&nbsp;</pre>\n            </el-col>\n            <el-col :span=\"4\">\n              <div class=\"submit_button\">\n                <el-link\n                  style=\"color: white; font-size: 1.2em;\"\n                  :underline=\"false\"\n                  @click=\"to_create_order\"\n                >立&nbsp;即&nbsp;付&nbsp;款</el-link>\n              </div>\n            </el-col>\n          </div>\n        </div>\n      </el-col>\n    </el-row>\n  </Container>\n</template>\n<script>\n/* eslint-disable */\nimport Container from \"@/components/Container.vue\";\n\nexport default {\n  name: \"Cart\",\n  data() {\n    return {\n      // 查询结果\n      skus: [],\n\n      // 所有商品总价及数量\n      total_price: 0,\n      count: 0,\n\n      // 选中的sku\n      selected_skus: []\n    };\n  },\n  mounted() {\n    this.get_cart();\n  },\n  methods: {\n    // 获取购物车信息\n    get_cart() {\n      let that = this;\n      that.$axios.get(\"cart/\").then(res => {\n        that.skus = res.data;\n      });\n    },\n\n    // 勾选事件\n    handleSelectionChange(rows) {\n      this.count = 0;\n      this.total_price = 0;\n      this.selected_skus = rows;\n      rows.forEach(value => {\n        this.total_price += value.count * value.price;\n        this.count += value.count;\n      });\n    },\n\n    // 表格行点击事件，点击行就取消勾选状态并立即再次勾选，为了出发handleSelectionChange\n    handleRowClick(row) {\n      this.$refs.skuList.toggleRowSelection(row, false);\n      // this.$refs.skuList.toggleRowSelection(row, true);\n    },\n\n    // 修改购物车信息， 利用async 和 await 实现同步请求\n    edit_cart: function(row) {\n      // 准备数据\n      let request_data = {\n        sku_id: row.id,\n        count: row.count,\n        spec: row.spec\n      };\n\n      this.$axios.put(\"cart/\", {\n        data: request_data\n      });\n    },\n\n    // 删除购物车记录\n    delete_cart(row) {\n      this.$axios\n        .delete(\"cart/\", {\n          data: row\n        })\n        .then(res => {\n          if (res.status == 200) {\n            this.get_cart();\n          }\n        });\n    },\n\n    // 跳转至提交订单页面\n    to_create_order() {\n      if (this.selected_skus.length == 0) {\n        this.$notify.warning({\n          title: \"请先选择需要购买的商品\"\n        });\n        return;\n      }\n      if (this.$store.state.token == undefined) {\n        this.$notify.warning({\n          title: \"请先登陆\"\n        });\n        return;\n      }\n\n      // 准备数据\n      let request_data = [];\n      this.selected_skus.forEach((value, index) => {\n        let sku = {};\n        sku.sku_id = value.id;\n        sku.spec = value.spec;\n\n        request_data[index] = sku;\n      });\n      let params = { skus: request_data };\n\n      this.$api.selects(params).then(res => {\n        if (res.status == 201) {\n          this.$router.push({\n            name: \"create_order\"\n          });\n        }\n      });\n    }\n  },\n  components: {\n    Container\n  },\n  watch: {}\n};\n</script>\n<style  scoped>\n.el-divider {\n  margin: 0;\n  padding: 0;\n  width: 85%;\n  margin-left: 6.5em;\n}\n.el-row {\n  margin: 0 0;\n}\n.detail {\n  height: 35em;\n  background-color: rgb(248, 219, 156);\n}\n.submit_button {\n  background-color: rgb(236, 62, 62);\n  height: 5em;\n  line-height: 5em;\n  text-align: center;\n}\n</style>"],"mappings":";;;AAkHA;AACA,OAAAA,SAAA;AAEA;EACAC,IAAA;EACAC,KAAA;IACA;MACA;MACAC,IAAA;MAEA;MACAC,WAAA;MACAC,KAAA;MAEA;MACAC,aAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,QAAA;EACA;EACAC,OAAA;IACA;IACAD,SAAA;MACA,IAAAE,IAAA;MACAA,IAAA,CAAAC,MAAA,CAAAC,GAAA,UAAAC,IAAA,CAAAC,GAAA;QACAJ,IAAA,CAAAP,IAAA,GAAAW,GAAA,CAAAZ,IAAA;MACA;IACA;IAEA;IACAa,sBAAAC,IAAA;MACA,KAAAX,KAAA;MACA,KAAAD,WAAA;MACA,KAAAE,aAAA,GAAAU,IAAA;MACAA,IAAA,CAAAC,OAAA,CAAAC,KAAA;QACA,KAAAd,WAAA,IAAAc,KAAA,CAAAb,KAAA,GAAAa,KAAA,CAAAC,KAAA;QACA,KAAAd,KAAA,IAAAa,KAAA,CAAAb,KAAA;MACA;IACA;IAEA;IACAe,eAAAC,GAAA;MACA,KAAAC,KAAA,CAAAC,OAAA,CAAAC,kBAAA,CAAAH,GAAA;MACA;IACA;IAEA;IACAI,SAAA,WAAAA,CAAAJ,GAAA;MACA;MACA,IAAAK,YAAA;QACAC,MAAA,EAAAN,GAAA,CAAAO,EAAA;QACAvB,KAAA,EAAAgB,GAAA,CAAAhB,KAAA;QACAwB,IAAA,EAAAR,GAAA,CAAAQ;MACA;MAEA,KAAAlB,MAAA,CAAAmB,GAAA;QACA5B,IAAA,EAAAwB;MACA;IACA;IAEA;IACAK,YAAAV,GAAA;MACA,KAAAV,MAAA,CACAqB,MAAA;QACA9B,IAAA,EAAAmB;MACA,GACAR,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAmB,MAAA;UACA,KAAAzB,QAAA;QACA;MACA;IACA;IAEA;IACA0B,gBAAA;MACA,SAAA5B,aAAA,CAAA6B,MAAA;QACA,KAAAC,OAAA,CAAAC,OAAA;UACAC,KAAA;QACA;QACA;MACA;MACA,SAAAC,MAAA,CAAAC,KAAA,CAAAC,KAAA,IAAAC,SAAA;QACA,KAAAN,OAAA,CAAAC,OAAA;UACAC,KAAA;QACA;QACA;MACA;;MAEA;MACA,IAAAZ,YAAA;MACA,KAAApB,aAAA,CAAAW,OAAA,EAAAC,KAAA,EAAAyB,KAAA;QACA,IAAAC,GAAA;QACAA,GAAA,CAAAjB,MAAA,GAAAT,KAAA,CAAAU,EAAA;QACAgB,GAAA,CAAAf,IAAA,GAAAX,KAAA,CAAAW,IAAA;QAEAH,YAAA,CAAAiB,KAAA,IAAAC,GAAA;MACA;MACA,IAAAC,MAAA;QAAA1C,IAAA,EAAAuB;MAAA;MAEA,KAAAoB,IAAA,CAAAC,OAAA,CAAAF,MAAA,EAAAhC,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAmB,MAAA;UACA,KAAAe,OAAA,CAAAC,IAAA;YACAhD,IAAA;UACA;QACA;MACA;IACA;EACA;EACAiD,UAAA;IACAlD;EACA;EACAmD,KAAA;AACA","ignoreList":[]}]}