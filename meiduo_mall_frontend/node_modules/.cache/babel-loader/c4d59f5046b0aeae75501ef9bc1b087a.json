{"remainingRequest":"/Users/lijiahao/git-test/meiduo/meiduo_mall_frontend/node_modules/thread-loader/dist/cjs.js!/Users/lijiahao/git-test/meiduo/meiduo_mall_frontend/node_modules/babel-loader/lib/index.js!/Users/lijiahao/git-test/meiduo/meiduo_mall_frontend/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/lijiahao/git-test/meiduo/meiduo_mall_frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lijiahao/git-test/meiduo/meiduo_mall_frontend/src/views/SkuDetail.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/lijiahao/git-test/meiduo/meiduo_mall_frontend/src/views/SkuDetail.vue","mtime":1762018358302},{"path":"/Users/lijiahao/git-test/meiduo/meiduo_mall_frontend/babel.config.js","mtime":1762018358253},{"path":"/Users/lijiahao/git-test/meiduo/meiduo_mall_frontend/node_modules/cache-loader/dist/cjs.js","mtime":1762102178152},{"path":"/Users/lijiahao/git-test/meiduo/meiduo_mall_frontend/node_modules/thread-loader/dist/cjs.js","mtime":1762102178152},{"path":"/Users/lijiahao/git-test/meiduo/meiduo_mall_frontend/node_modules/babel-loader/lib/index.js","mtime":1762102182065},{"path":"/Users/lijiahao/git-test/meiduo/meiduo_mall_frontend/node_modules/cache-loader/dist/cjs.js","mtime":1762102178152},{"path":"/Users/lijiahao/git-test/meiduo/meiduo_mall_frontend/node_modules/vue-loader/lib/index.js","mtime":1762102181323}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7Ci8qIGVzbGludC1kaXNhYmxlICovCmltcG9ydCBDb250YWluZXIgZnJvbSAiQC9jb21wb25lbnRzL0NvbnRhaW5lci52dWUiOwppbXBvcnQgQ2F0ZWdvcnkgZnJvbSAiQC9jb21wb25lbnRzL0NhdGVnb3J5LnZ1ZSI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiU2t1RGV0YWlsIiwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgLy8g5p+l6K+i57uT5p6cCiAgICAgIHNrdV9kYXRhOiB7fSwKICAgICAgLy8gc2t1X2lkCiAgICAgIHNrdV9pZDogMSwKICAgICAgLy8g5pWw6YePCiAgICAgIG51bTogMSwKICAgICAgLy8g6KeE5qC86YCJ5oup5pWw57uECiAgICAgIGNob2ljZTogW10sCiAgICAgIC8vIOaAu+S7twogICAgICBmaW5hbF9wcmljZTogMCwKICAgICAgLy8g5ZWG5ZOB5bqT5a2Y5Li6MOaXtu+8jOWkseaViOi0reS5sOWSjOWKoOWFpei0reeJqei9puaMiemSrgogICAgICBzdGF0dXM6IGZhbHNlCiAgICB9OwogIH0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuc2t1X2lkID0gdGhpcy4kcm91dGUucXVlcnkuc2t1X2lkOwogICAgdGhpcy5nZXRfc2t1X2RldGFpbCgpOwogICAgdGhpcy5zZXRfaGlzdG9yeSgpOwogIH0sCiAgbWV0aG9kczogewogICAgLy8g6I635Y+Wc2t16K+m5oOF5pWw5o2uCiAgICBnZXRfc2t1X2RldGFpbCgpIHsKICAgICAgbGV0IHRoYXQgPSB0aGlzOwogICAgICB0aGF0LiRheGlvcy5nZXQoInNrdV9kZXRhaWwvIiArIHRoYXQuc2t1X2lkICsgIi8iKS50aGVuKHJlcyA9PiB7CiAgICAgICAgdGhhdC5za3VfZGF0YSA9IHJlcy5kYXRhOwogICAgICAgIHRoYXQuZmluYWxfcHJpY2UgPSB0aGF0LnNrdV9kYXRhLnByaWNlOwogICAgICAgIGlmICh0aGF0LnNrdV9kYXRhLnN0b2NrID09IDApIHsKICAgICAgICAgIHRoYXQuc3RhdHVzID0gdHJ1ZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOa3u+WKoOi0reeJqei9pgogICAgYWRkX2NhcnQoKSB7CiAgICAgIGlmICh0aGlzLiRhcGkuY2hlY2tfc3BlYyh0aGlzLmNob2ljZSwgdGhpcy5za3VfZGF0YS5zcGVjcykpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgIG1lc3NhZ2U6ICLor7flhYjpgInmi6nllYblk4Hop4TmoLwiLAogICAgICAgICAgdHlwZTogIndhcm5pbmciCiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGxldCB0aGF0ID0gdGhpczsKICAgICAgdGhhdC4kYXhpb3MucG9zdCgiY2FydC8iLCB7CiAgICAgICAgc2t1X2lkOiB0aGF0LnNrdV9pZCwKICAgICAgICBjb3VudDogdGhhdC5udW0sCiAgICAgICAgc3BlYzogdGhhdC5jaG9pY2Uuam9pbigiXyIpCiAgICAgIH0pLnRoZW4ocmVzID0+IHsKICAgICAgICB0aGF0LiRub3RpZnkoewogICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgdGl0bGU6ICLmt7vliqDotK3nianovabmiJDlip8iCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOeri+WNs+i0reS5sAogICAgYnV5X25vdygpIHsKICAgICAgaWYgKHRoaXMuJGFwaS5jaGVja19zcGVjKHRoaXMuY2hvaWNlLCB0aGlzLnNrdV9kYXRhLnNwZWNzKSkgewogICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgbWVzc2FnZTogIuivt+WFiOmAieaLqeWVhuWTgeinhOagvCIsCiAgICAgICAgICB0eXBlOiAid2FybmluZyIKICAgICAgICB9KTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgaWYgKHRoaXMuJHN0b3JlLnN0YXRlLnRva2VuID09IHVuZGVmaW5lZCkgewogICAgICAgIHRoaXMuJG5vdGlmeS53YXJuaW5nKHsKICAgICAgICAgIHRpdGxlOiAi6K+35YWI55m76ZmGIgogICAgICAgIH0pOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBsZXQgdGhhdCA9IHRoaXM7CiAgICAgIHRoYXQuJGF4aW9zLnBvc3QoImNhcnQvIiwgewogICAgICAgIHNrdV9pZDogdGhhdC5za3VfaWQsCiAgICAgICAgY291bnQ6IHRoYXQubnVtLAogICAgICAgIHNwZWM6IHRoYXQuY2hvaWNlLmpvaW4oIl8iKQogICAgICB9KS50aGVuKCgpID0+IHsKICAgICAgICAvLyDlh4blpIfmlbDmja4KICAgICAgICBsZXQgcmVxdWVzdF9kYXRhID0gW107CiAgICAgICAgcmVxdWVzdF9kYXRhWzBdID0gewogICAgICAgICAgc2t1X2lkOiB0aGF0LnNrdV9pZCwKICAgICAgICAgIHNwZWM6IHRoYXQuY2hvaWNlLmpvaW4oIl8iKQogICAgICAgIH07CiAgICAgICAgbGV0IHBhcmFtcyA9IHsKICAgICAgICAgIHNrdXM6IHJlcXVlc3RfZGF0YQogICAgICAgIH07CiAgICAgICAgdGhhdC4kYXBpLnNlbGVjdHMocGFyYW1zKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICBpZiAocmVzLnN0YXR1cyA9PSAyMDEpIHsKICAgICAgICAgICAgdGhhdC4kcm91dGVyLnB1c2goewogICAgICAgICAgICAgIG5hbWU6ICJjcmVhdGVfb3JkZXIiCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDkv53lrZjmtY/op4jorrDlvZUKICAgIHNldF9oaXN0b3J5KCkgewogICAgICBpZiAodGhpcy4kc3RvcmUuc3RhdGUudG9rZW4pIHsKICAgICAgICB0aGlzLiRheGlvcy5wb3N0KCJzZXRfaGlzdG9yeS8iLCB7CiAgICAgICAgICBza3VfaWQ6IHRoaXMuc2t1X2lkCiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgcmV0dXJuOwogICAgfQogIH0sCiAgY29tcG9uZW50czogewogICAgQ29udGFpbmVyLAogICAgQ2F0ZWdvcnkKICB9LAogIHdhdGNoOiB7CiAgICBudW06IGZ1bmN0aW9uICgpIHsKICAgICAgdGhpcy5maW5hbF9wcmljZSA9IHRoaXMuc2t1X2RhdGEucHJpY2UgKiB0aGlzLm51bTsKICAgIH0KICB9Cn07"},{"version":3,"names":["Container","Category","name","data","sku_data","sku_id","num","choice","final_price","status","mounted","$route","query","get_sku_detail","set_history","methods","that","$axios","get","then","res","price","stock","add_cart","$api","check_spec","specs","$message","message","type","post","count","spec","join","$notify","title","buy_now","$store","state","token","undefined","warning","request_data","params","skus","selects","$router","push","components","watch"],"sources":["src/views/SkuDetail.vue"],"sourcesContent":["<template>\n  <Container>\n    <Category></Category>\n    <!-- 详情展示区 -->\n    <el-row>\n      <el-col :span=\"2\">\n        <pre style=\"margin:0; padding: 0;\">&nbsp;</pre>\n      </el-col>\n      <el-col :span=\"20\">\n        <div class=\"detail\">\n          <!-- 图片展示 -->\n          <el-col :span=\"8\">\n            <div class=\"image\">\n              <el-image :src=\"sku_data.default_image_url\"></el-image>\n            </div>\n            <div class=\"img-list\">\n              <el-scrollbar>\n                <ul>\n                  <li v-for=\"item in sku_data.images\" :key=\"item.image\">\n                    <el-popover placement=\"top\" trigger=\"hover\">\n                      <img :src=\"item.image\" style=\"height: 30em;width: 30em\" />\n                      <img\n                        slot=\"reference\"\n                        :src=\"item.image\"\n                        style=\"max-height: 3em;max-width: 3em\"\n                      />\n                    </el-popover>\n                  </li>\n                </ul>\n              </el-scrollbar>\n            </div>\n          </el-col>\n          <el-col :span=\"2\">\n            <pre style=\"margin:0; padding: 0;\">&nbsp;</pre>\n          </el-col>\n          <!-- 规格详情 -->\n          <el-col :span=\"14\">\n            <div class=\"text\">\n              <div>\n                <p style=\"font-size: 1.5em;\">{{ sku_data.name }}</p>\n                <span style=\"font-size: 0.2em; color: grey;\">{{ sku_data.caption }}</span>\n              </div>\n              <div class=\"price\">\n                <p style=\"height: 4em; line-height:4em;\">\n                  <span style=\"font-size: 2em; color:red; margin-left: 0.5em;\">{{ sku_data.price }}</span>\n                  <span style=\"font-size: 0.2em; margin-left: 10em;\">市场价：{{ sku_data.market_price }}</span>\n                  <span\n                    style=\"font-size: 0.2em; margin-left: 60em; color: grey;\"\n                  >{{ sku_data.comments }} 条评价</span>\n                </p>\n              </div>\n              <div>\n                <span>数量：</span>\n                <el-input-number v-model=\"num\" :min=\"1\" :max=\"sku_data.stock\" size=\"mini\"></el-input-number>\n                <span\n                  style=\"font-size: 0.2em; margin-left: 15em; color: grey;\"\n                >剩余库存：{{ sku_data.stock }}</span>\n              </div>\n              <div v-for=\"(spec, index) in sku_data.specs\" :key=\"spec.name\">\n                <span>{{ spec.name }}：&nbsp;</span>\n                <el-radio-group v-model=\"choice[index]\" size=\"mini\" fill=\"red\">\n                  <el-radio-button\n                    v-for=\"value in spec.list\"\n                    :key=\"value\"\n                    :label=\"value\"\n                  >{{ value }}</el-radio-button>\n                </el-radio-group>\n              </div>\n              <div>\n                <span>总价：¥</span>\n                <span style=\"font-size: 2em; color:red; margin-left: 0.5em;\">{{ final_price }}</span>\n              </div>\n              <div style=\"margin-top: 2em;\">\n                <p>\n                  <el-button type=\"danger\" @click=\"buy_now()\" :disabled=\"status\">立即购买</el-button>\n                  <el-button type=\"danger\" plain @click=\"add_cart()\" :disabled=\"status\">加入购物车</el-button>\n                </p>\n              </div>\n            </div>\n          </el-col>\n        </div>\n      </el-col>\n    </el-row>\n    <!-- 其他信息：介绍，配件清单，售后 -->\n    <el-row>\n      <div class=\"description\" v-if=\"sku_data.desc\">\n        <div v-html=\"sku_data.desc.desc_detail\" style=\"text-align: center;\"></div>\n        <div v-html=\"sku_data.desc.desc_pack\"></div>\n        <div v-html=\"sku_data.desc.desc_service\"></div>\n      </div>\n    </el-row>\n  </Container>\n</template>\n<script>\n/* eslint-disable */\nimport Container from \"@/components/Container.vue\";\nimport Category from \"@/components/Category.vue\";\n\nexport default {\n  name: \"SkuDetail\",\n  data() {\n    return {\n      // 查询结果\n      sku_data: {},\n\n      // sku_id\n      sku_id: 1,\n\n      // 数量\n      num: 1,\n\n      // 规格选择数组\n      choice: [],\n\n      // 总价\n      final_price: 0,\n\n      // 商品库存为0时，失效购买和加入购物车按钮\n      status: false\n    };\n  },\n  mounted() {\n    this.sku_id = this.$route.query.sku_id;\n    this.get_sku_detail();\n    this.set_history();\n  },\n  methods: {\n    // 获取sku详情数据\n    get_sku_detail() {\n      let that = this;\n      that.$axios.get(\"sku_detail/\" + that.sku_id + \"/\").then(res => {\n        that.sku_data = res.data;\n        that.final_price = that.sku_data.price;\n        if (that.sku_data.stock == 0) {\n          that.status = true;\n        }\n      });\n    },\n    // 添加购物车\n    add_cart() {\n      if (this.$api.check_spec(this.choice, this.sku_data.specs)) {\n        this.$message({\n          message: \"请先选择商品规格\",\n          type: \"warning\",\n        });\n        return;\n      }\n      let that = this;\n      that.$axios\n        .post(\"cart/\", {\n          sku_id: that.sku_id,\n          count: that.num,\n          spec: that.choice.join(\"_\")\n        })\n        .then(res => {\n          that.$notify({\n            type: \"success\",\n            title: \"添加购物车成功\"\n          });\n        });\n    },\n\n    // 立即购买\n    buy_now() {\n      if (this.$api.check_spec(this.choice, this.sku_data.specs)) {\n        this.$message({\n          message: \"请先选择商品规格\",\n          type: \"warning\",\n        });\n        return;\n      }\n      if (this.$store.state.token == undefined) {\n        this.$notify.warning({\n          title: \"请先登陆\"\n        });\n        return;\n      }\n      let that = this;\n      that.$axios\n        .post(\"cart/\", {\n          sku_id: that.sku_id,\n          count: that.num,\n          spec: that.choice.join(\"_\")\n        })\n        .then(() => {\n          // 准备数据\n          let request_data = [];\n          request_data[0] = {\n            sku_id: that.sku_id,\n            spec: that.choice.join(\"_\")\n          };\n          let params = { skus: request_data };\n\n          that.$api.selects(params).then(res => {\n            if (res.status == 201) {\n              that.$router.push({\n                name: \"create_order\"\n              });\n            }\n          });\n        });\n    },\n\n    // 保存浏览记录\n    set_history() {\n      if (this.$store.state.token) {\n        this.$axios.post(\"set_history/\", {\n          sku_id: this.sku_id\n        });\n      }\n      return;\n    }\n  },\n  components: {\n    Container,\n    Category\n  },\n  watch: {\n    num: function() {\n      this.final_price = this.sku_data.price * this.num;\n    }\n  }\n};\n</script>\n<style  scoped>\n.detail {\n  height: 35em;\n}\n.image {\n  width: 24em;\n  height: 24em;\n  margin-top: 2em;\n  margin-bottom: 2em;\n}\n.img-list {\n  background-color: rgb(199, 193, 193);\n  border-radius: 0.5em;\n}\nul {\n  display: flex;\n}\nli {\n  display: inline-block;\n  flex-shrink: 0;\n  margin: 0 1em;\n  padding: 0 0;\n}\n\n.text {\n  text-align: left;\n  width: 40em;\n}\n\n.text div {\n  margin: 1em 0;\n}\n\n.price {\n  background-color: rgb(235, 225, 230);\n}\n\n.description {\n  width: 80%;\n  margin-left: 6em;\n  padding: 1em 3em;\n  background-color: rgb(131, 157, 179);\n  border-radius: 1em;\n}\n</style>"],"mappings":";AA8FA;AACA,OAAAA,SAAA;AACA,OAAAC,QAAA;AAEA;EACAC,IAAA;EACAC,KAAA;IACA;MACA;MACAC,QAAA;MAEA;MACAC,MAAA;MAEA;MACAC,GAAA;MAEA;MACAC,MAAA;MAEA;MACAC,WAAA;MAEA;MACAC,MAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAL,MAAA,QAAAM,MAAA,CAAAC,KAAA,CAAAP,MAAA;IACA,KAAAQ,cAAA;IACA,KAAAC,WAAA;EACA;EACAC,OAAA;IACA;IACAF,eAAA;MACA,IAAAG,IAAA;MACAA,IAAA,CAAAC,MAAA,CAAAC,GAAA,iBAAAF,IAAA,CAAAX,MAAA,QAAAc,IAAA,CAAAC,GAAA;QACAJ,IAAA,CAAAZ,QAAA,GAAAgB,GAAA,CAAAjB,IAAA;QACAa,IAAA,CAAAR,WAAA,GAAAQ,IAAA,CAAAZ,QAAA,CAAAiB,KAAA;QACA,IAAAL,IAAA,CAAAZ,QAAA,CAAAkB,KAAA;UACAN,IAAA,CAAAP,MAAA;QACA;MACA;IACA;IACA;IACAc,SAAA;MACA,SAAAC,IAAA,CAAAC,UAAA,MAAAlB,MAAA,OAAAH,QAAA,CAAAsB,KAAA;QACA,KAAAC,QAAA;UACAC,OAAA;UACAC,IAAA;QACA;QACA;MACA;MACA,IAAAb,IAAA;MACAA,IAAA,CAAAC,MAAA,CACAa,IAAA;QACAzB,MAAA,EAAAW,IAAA,CAAAX,MAAA;QACA0B,KAAA,EAAAf,IAAA,CAAAV,GAAA;QACA0B,IAAA,EAAAhB,IAAA,CAAAT,MAAA,CAAA0B,IAAA;MACA,GACAd,IAAA,CAAAC,GAAA;QACAJ,IAAA,CAAAkB,OAAA;UACAL,IAAA;UACAM,KAAA;QACA;MACA;IACA;IAEA;IACAC,QAAA;MACA,SAAAZ,IAAA,CAAAC,UAAA,MAAAlB,MAAA,OAAAH,QAAA,CAAAsB,KAAA;QACA,KAAAC,QAAA;UACAC,OAAA;UACAC,IAAA;QACA;QACA;MACA;MACA,SAAAQ,MAAA,CAAAC,KAAA,CAAAC,KAAA,IAAAC,SAAA;QACA,KAAAN,OAAA,CAAAO,OAAA;UACAN,KAAA;QACA;QACA;MACA;MACA,IAAAnB,IAAA;MACAA,IAAA,CAAAC,MAAA,CACAa,IAAA;QACAzB,MAAA,EAAAW,IAAA,CAAAX,MAAA;QACA0B,KAAA,EAAAf,IAAA,CAAAV,GAAA;QACA0B,IAAA,EAAAhB,IAAA,CAAAT,MAAA,CAAA0B,IAAA;MACA,GACAd,IAAA;QACA;QACA,IAAAuB,YAAA;QACAA,YAAA;UACArC,MAAA,EAAAW,IAAA,CAAAX,MAAA;UACA2B,IAAA,EAAAhB,IAAA,CAAAT,MAAA,CAAA0B,IAAA;QACA;QACA,IAAAU,MAAA;UAAAC,IAAA,EAAAF;QAAA;QAEA1B,IAAA,CAAAQ,IAAA,CAAAqB,OAAA,CAAAF,MAAA,EAAAxB,IAAA,CAAAC,GAAA;UACA,IAAAA,GAAA,CAAAX,MAAA;YACAO,IAAA,CAAA8B,OAAA,CAAAC,IAAA;cACA7C,IAAA;YACA;UACA;QACA;MACA;IACA;IAEA;IACAY,YAAA;MACA,SAAAuB,MAAA,CAAAC,KAAA,CAAAC,KAAA;QACA,KAAAtB,MAAA,CAAAa,IAAA;UACAzB,MAAA,OAAAA;QACA;MACA;MACA;IACA;EACA;EACA2C,UAAA;IACAhD,SAAA;IACAC;EACA;EACAgD,KAAA;IACA3C,GAAA,WAAAA,CAAA;MACA,KAAAE,WAAA,QAAAJ,QAAA,CAAAiB,KAAA,QAAAf,GAAA;IACA;EACA;AACA","ignoreList":[]}]}