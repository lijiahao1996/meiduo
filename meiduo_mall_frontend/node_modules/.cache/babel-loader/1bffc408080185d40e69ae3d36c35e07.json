{"remainingRequest":"/Users/lijiahao/git-test/meiduo/meiduo_mall_frontend/node_modules/thread-loader/dist/cjs.js!/Users/lijiahao/git-test/meiduo/meiduo_mall_frontend/node_modules/babel-loader/lib/index.js!/Users/lijiahao/git-test/meiduo/meiduo_mall_frontend/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/lijiahao/git-test/meiduo/meiduo_mall_frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lijiahao/git-test/meiduo/meiduo_mall_frontend/src/views/Register.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/lijiahao/git-test/meiduo/meiduo_mall_frontend/src/views/Register.vue","mtime":1762018358301},{"path":"/Users/lijiahao/git-test/meiduo/meiduo_mall_frontend/babel.config.js","mtime":1762018358253},{"path":"/Users/lijiahao/git-test/meiduo/meiduo_mall_frontend/node_modules/cache-loader/dist/cjs.js","mtime":1762102178152},{"path":"/Users/lijiahao/git-test/meiduo/meiduo_mall_frontend/node_modules/thread-loader/dist/cjs.js","mtime":1762102178152},{"path":"/Users/lijiahao/git-test/meiduo/meiduo_mall_frontend/node_modules/babel-loader/lib/index.js","mtime":1762102182065},{"path":"/Users/lijiahao/git-test/meiduo/meiduo_mall_frontend/node_modules/cache-loader/dist/cjs.js","mtime":1762102178152},{"path":"/Users/lijiahao/git-test/meiduo/meiduo_mall_frontend/node_modules/vue-loader/lib/index.js","mtime":1762102181323}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZXJyb3IuY2F1c2UuanMiOwppbXBvcnQgRm9vdGVyIGZyb20gIkAvY29tcG9uZW50cy9Gb290ZXIudnVlIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJSZWdpc3RlciIsCiAgZGF0YSgpIHsKICAgIC8vIOagoemqjOS4pOasoeWvhueggei+k+WFpeaYr+WQpuebuOWQjO+8jOagoemqjOaIkOWKn+aXtuS4gOWumuimgeWbnuiwg2NhbGxiYWNrKCnjgILlkKbliJnkvJrlr7zoh7TlhajlsYDmoKHpqozpgJrov4flkI7kuI3nu6fnu63miafooYwKICAgIGNvbnN0IGNoZWNrX3B3ZCA9IChydWxlLCB2YWx1ZSwgY2FsbGJhY2spID0+IHsKICAgICAgaWYgKHRoaXMuZm9ybS5wYXNzd29yZCA9PT0gdmFsdWUpIHsKICAgICAgICBjYWxsYmFjaygpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuZm9ybS5wYXNzd29yZDIgPSAiIjsKICAgICAgICAvLyDlvZPmoKHpqozkuI3ov4fml7bvvIznoa7orqTlr4bnoIHmoYboh6rliqjojrflvpfnhKbngrkKICAgICAgICAvLyB0aGlzLiRyZWZzLnBhc3N3b3JkMi5mb2N1cygpOwogICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcigi5Lik5qyh6L6T5YWl55qE5a+G56CB5LiN5LiA6Ie077yM6K+36YeN5paw6L6T5YWlIikpOwogICAgICB9CiAgICB9OwogICAgY29uc3QgY2hlY2tfdXNlcm5hbWUgPSAocnVsZSwgdmFsdWUsIGNhbGxiYWNrKSA9PiB7CiAgICAgIHRoaXMuJGF4aW9zLmdldCgidXNlcnMvIiArIHZhbHVlICsgIi9jb3VudC8iKS50aGVuKHJlcyA9PiB7CiAgICAgICAgaWYgKHJlcy5kYXRhLmNvdW50ID4gMCkgewogICAgICAgICAgY2FsbGJhY2sobmV3IEVycm9yKCLnlKjmiLflkI3lt7LlrZjlnKgiKSk7CiAgICAgICAgfQogICAgICAgIGNhbGxiYWNrKCk7CiAgICAgIH0pLmNhdGNoKGVyciA9PiB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihlcnIubWVzc2FnZSk7CiAgICAgIH0pOwogICAgfTsKICAgIGNvbnN0IGNoZWNrX21vYmlsZSA9IChydWxlLCB2YWx1ZSwgY2FsbGJhY2spID0+IHsKICAgICAgdGhpcy4kYXhpb3MuZ2V0KCJ1c2Vycy8iICsgdmFsdWUgKyAiL2NvdW50LyIpLnRoZW4ocmVzID0+IHsKICAgICAgICBpZiAocmVzLmRhdGEuY291bnQgPiAwKSB7CiAgICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IoIuivpeaJi+acuuWPt+W3sue7j+azqOWGjCIpKTsKICAgICAgICB9CiAgICAgICAgY2FsbGJhY2soKTsKICAgICAgfSkuY2F0Y2goZXJyID0+IHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKGVyci5tZXNzYWdlKTsKICAgICAgfSk7CiAgICB9OwogICAgcmV0dXJuIHsKICAgICAgLy8g5Zu+54mH6Lev5b6E44CC5byV55So5pys5Zyw5Zu+54mH5pe277yM5bCG5Zu+54mH5L2c5Li65a+56LGh5a+85YWl5omN6IO957uR5a6aCiAgICAgIGltYWdlOiB7CiAgICAgICAgbG9nbzogcmVxdWlyZSgiLi4vYXNzZXRzL2ltYWdlcy9sb2dvLnBuZyIpLAogICAgICAgIHJlZ2lzdGVyOiByZXF1aXJlKCIuLi9hc3NldHMvaW1hZ2VzL3JlZ2lzdGVyX2Jhbm5lci5wbmciKSwKICAgICAgICBpbnRlcnZhbDogcmVxdWlyZSgiLi4vYXNzZXRzL2ltYWdlcy9pbnRlcnZhbF9saW5lLnBuZyIpCiAgICAgIH0sCiAgICAgIC8vIOWPkemAgeefreS/oeaMiemSruagh+ivhuWPiuaWh+acrAogICAgICBzZW5kX2ZsYWc6IGZhbHNlLAogICAgICBzZW5kX3RpcHM6ICLlj5HpgIHpqozor4HnoIEiLAogICAgICAvLyDms6jlhozooajljZUKICAgICAgZm9ybTogewogICAgICAgIHVzZXJuYW1lOiAiIiwKICAgICAgICBwYXNzd29yZDogIiIsCiAgICAgICAgcGFzc3dvcmQyOiAiIiwKICAgICAgICBtb2JpbGU6ICIiLAogICAgICAgIHNtc19jb2RlOiAiIiwKICAgICAgICBhbGxvdzogIiIKICAgICAgfSwKICAgICAgLy8g6KGo5Y2V5qCh6aqM6KeE5YiZCiAgICAgIHJ1bGVzOiB7CiAgICAgICAgdXNlcm5hbWU6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIHBhdHRlcm46IC9eXHd7NSwyMH0kLywKICAgICAgICAgIG1lc3NhZ2U6ICLnlKjmiLflkI3lupTnlLHlrZfmr43mlbDlrZfmiJbkuIvliJLnur/nu4TmiJDnmoQ1772eMjDkvY3lrZfnrKYiLAogICAgICAgICAgdHJpZ2dlcjogImJsdXIiCiAgICAgICAgfSwgewogICAgICAgICAgdmFsaWRhdG9yOiBjaGVja191c2VybmFtZSwKICAgICAgICAgIHRyaWdnZXI6ICJibHVyIgogICAgICAgIH1dLAogICAgICAgIHBhc3N3b3JkOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBwYXR0ZXJuOiAvXlx3ezgsMjB9JC8sCiAgICAgICAgICBtZXNzYWdlOiAi5a+G56CB5bqU55Sx5a2X5q+N5pWw5a2X5oiW5LiL5YiS57q/57uE5oiQ55qEOO+9njIw5L2N5a2X56ymIiwKICAgICAgICAgIHRyaWdnZXI6ICJibHVyIgogICAgICAgIH1dLAogICAgICAgIHBhc3N3b3JkMjogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogIuehruiupOWvhueggeS4uuW/heWhq+mhuSIsCiAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciIKICAgICAgICB9LCB7CiAgICAgICAgICB2YWxpZGF0b3I6IGNoZWNrX3B3ZCwKICAgICAgICAgIHRyaWdnZXI6ICJibHVyIgogICAgICAgIH1dLAogICAgICAgIG1vYmlsZTogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgcGF0dGVybjogL14xWzMtOV17MX1cZHs5fSQvLAogICAgICAgICAgbWVzc2FnZTogIuaJi+acuuWPt+eggeS4jeWQiOazlSIsCiAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciIKICAgICAgICB9LCB7CiAgICAgICAgICB2YWxpZGF0b3I6IGNoZWNrX21vYmlsZSwKICAgICAgICAgIHRyaWdnZXI6ICJibHVyIgogICAgICAgIH1dLAogICAgICAgIHNtc19jb2RlOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBwYXR0ZXJuOiAvXlswLTldezZ9JC8sCiAgICAgICAgICBtZXNzYWdlOiAi6aqM6K+B56CB6ZSZ6K+vIiwKICAgICAgICAgIHRyaWdnZXI6ICJibHVyIgogICAgICAgIH1dLAogICAgICAgIGFsbG93OiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAi6K+35Yu+6YCJ5L2/55So5Y2P6K6uIiwKICAgICAgICAgIHRyaWdnZXI6ICJjaGFuZ2UiCiAgICAgICAgfV0KICAgICAgfQogICAgfTsKICB9LAogIG1vdW50ZWQoKSB7fSwKICBtZXRob2RzOiB7CiAgICAvLyDojrflj5bnn63kv6Hpqozor4HnoIEKICAgIGdldFNtc0NvZGUoKSB7CiAgICAgIGxldCB0aGF0ID0gdGhpczsKICAgICAgaWYgKHRoYXQuZm9ybS5tb2JpbGUpIHsKICAgICAgICAvLyDliKTmlq3mmK/lkKblt7Lnu4/lj5Hkuobnn63kv6EKICAgICAgICBpZiAodGhhdC5zZW5kX2ZsYWcpIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgdGhhdC4kYXhpb3MuZ2V0KCJzbXNfY29kZXMvIiArIHRoYXQuZm9ybS5tb2JpbGUgKyAiLyIpLnRoZW4ocmVzID0+IHsKICAgICAgICAgIGlmIChyZXMuc3RhdHVzID09IDIwMCkgewogICAgICAgICAgICAvLyDnn63kv6Hlj5HpgIHmiJDlip/lkI7vvIznva7ngbDmjInpkq7vvIzlgJLorqHml7Y2MOenku+8jDYw56eS5ZCO5YWB6K6455So5oi35YaN5qyh54K55Ye75Y+R6YCB55+t5L+h6aqM6K+B56CB55qE5oyJ6ZKuCiAgICAgICAgICAgIHRoYXQuc2VuZF9mbGFnID0gdHJ1ZTsKICAgICAgICAgICAgbGV0IG51bSA9IDYwOwogICAgICAgICAgICAvLyDorr7nva7kuIDkuKrorqHml7blmagKICAgICAgICAgICAgbGV0IHRpbWVyID0gc2V0SW50ZXJ2YWwoKCkgPT4gewogICAgICAgICAgICAgIGlmIChudW0gPT0gMSkgewogICAgICAgICAgICAgICAgLy8g5aaC5p6c6K6h5pe25Zmo5Yiw5pyA5ZCOLCDmuIXpmaTorqHml7blmajlr7nosaEKICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGltZXIpOwogICAgICAgICAgICAgICAgLy8g5bCG54K55Ye76I635Y+W6aqM6K+B56CB55qE5oyJ6ZKu5bGV56S655qE5paH5pys5Zue5aSN5oiQ5Y6f5aeL5paH5pysCiAgICAgICAgICAgICAgICB0aGF0LnNlbmRfdGlwcyA9ICLlj5HpgIHpqozor4HnoIEiOwogICAgICAgICAgICAgICAgLy8g5bCG54K55Ye75oyJ6ZKu55qEb25jbGlja+S6i+S7tuWHveaVsOaBouWkjeWbnuWOuwogICAgICAgICAgICAgICAgdGhhdC5zZW5kX2ZsYWcgPSBmYWxzZTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgbnVtIC09IDE7CiAgICAgICAgICAgICAgICAvLyDlsZXnpLrlgJLorqHml7bkv6Hmga8KICAgICAgICAgICAgICAgIHRoYXQuc2VuZF90aXBzID0gbnVtICsgIuenkiI7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCAxMDAwLCA2MCk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhhdC4kbWVzc2FnZS5lcnJvcigi6K+35YWI5aGr5YaZ5omL5py65Y+377yBIik7CiAgICAgIH0KICAgIH0sCiAgICAvLyDmj5DkuqTms6jlhozooajljZUKICAgIHN1Ym1pdCgpIHsKICAgICAgdGhpcy4kcmVmcy5yZWdpc3RlckZvcm0udmFsaWRhdGUodmFsaWQgPT4gewogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgbGV0IHRoYXQgPSB0aGlzOwogICAgICAgICAgdGhhdC4kYXhpb3MucG9zdCgidXNlcnMvIiwgdGhhdC5mb3JtKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgIC8vIOazqOWGjOaIkOWKn+aXtu+8jOeKtuaAgeeggeS4ujIwMQogICAgICAgICAgICAvLyDms6jlhozmiJDlip/lkI7vvIzkv53lrZh0b2tlbuS/oeaBrwogICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5jbGVhcigpOyAvLyBzZXNzaW9uU3RvcmFnZeWFs+mXrea1j+iniOWZqOWNs+a4hemZpAogICAgICAgICAgICBsb2NhbFN0b3JhZ2UuY2xlYXIoKTsgLy8g5rC45LmF5L+d5a2YCgogICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS50b2tlbiA9IHJlcy5kYXRhLnRva2VuOwogICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS51c2VybmFtZSA9IHJlcy5kYXRhLnVzZXJuYW1lOwogICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS51c2VyX2lkID0gcmVzLmRhdGEuaWQ7CiAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgic2V0U3RhdHVzIiwgewogICAgICAgICAgICAgIHVzZXJuYW1lOiByZXMuZGF0YS51c2VybmFtZSwKICAgICAgICAgICAgICB0b2tlbjogcmVzLmRhdGEudG9rZW4KICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAvLyDot7PovazpobXpnaLjgILmoLnmja7ot7Povazov4fmnaXnmoTpobXpnaLvvIznmbvpmYbmiJDlip/lkI7vvIzot7Povazlm57ljrvvvJvlkKbliJnov5vlhaXkuLvpobUKICAgICAgICAgICAgdGhhdC4kcm91dGVyLnJlcGxhY2UodGhhdC4kcm91dGUucXVlcnkucmVkaXJlY3QgfHwgIi8iKTsKICAgICAgICAgIH0pLmNhdGNoKGVyciA9PiB7CiAgICAgICAgICAgIHRoYXQuJG1lc3NhZ2UuZXJyb3IoIuacjeWKoeWZqOmUmeivryIpOwogICAgICAgICAgICB0aGF0LiRtZXNzYWdlLmVycm9yKGVyci5tZXNzYWdlKTsKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9LAogIGNvbXBvbmVudHM6IHsKICAgIEZvb3RlcgogIH0KfTs="},{"version":3,"names":["Footer","name","data","check_pwd","rule","value","callback","form","password","password2","Error","check_username","$axios","get","then","res","count","catch","err","$message","error","message","check_mobile","image","logo","require","register","interval","send_flag","send_tips","username","mobile","sms_code","allow","rules","required","pattern","trigger","validator","mounted","methods","getSmsCode","that","status","num","timer","setInterval","clearInterval","submit","$refs","registerForm","validate","valid","post","sessionStorage","clear","localStorage","token","user_id","id","$store","commit","$router","replace","$route","query","redirect","components"],"sources":["src/views/Register.vue"],"sourcesContent":["<template>\n  <div>\n    <el-row>\n      <!-- 左半部分 -->\n      <el-col :span=\"14\" style=\"margin-top: 4em; text-align: right;\">\n        <div>\n          <div>\n            <el-image :src=\"image.logo\"></el-image>\n          </div>\n          <div>\n            <span class=\"banner-text\">商品美·种类多·欢迎选购</span>\n          </div>\n          <div></div>\n          <el-image :src=\"image.register\"></el-image>\n        </div>\n      </el-col>\n      <!-- 分割线 -->\n      <el-col :span=\"1\" style=\"margin-top: 2em; text-align: center;\">\n        <el-image :src=\"image.interval\"></el-image>\n      </el-col>\n      <!-- 右半部分 -->\n      <el-col :span=\"9\" style=\"width: 22em; margin-top: 4em;\">\n        <div>\n          <!-- 标题栏 -->\n          <el-row style=\"line-height: 3em;\">\n            <el-col :span=\"18\">\n              <span class=\"register-text\">用户注册</span>\n            </el-col>\n            <el-col :span=\"6\" style=\"text-align: right;\">\n              <!-- click事件直接绑定router内置函数完成页面跳转 -->\n              <el-button type=\"text\" @click=\"$router.push({ name: 'login' })\">\n                登陆\n                <i class=\"el-icon-d-arrow-right el-icon--right\"></i>\n              </el-button>\n            </el-col>\n          </el-row>\n          <el-divider></el-divider>\n\n          <!-- 注册表单 -->\n          <el-form size=\"mini\" label-width=\"6em\" :model=\"form\" :rules=\"rules\" ref=\"registerForm\">\n            <el-form-item label=\"用户名:\" prop=\"username\">\n              <el-input v-model=\"form.username\"></el-input>\n            </el-form-item>\n            <el-form-item label=\"密码:\" prop=\"password\">\n              <el-input v-model=\"form.password\" type=\"password\" auto-complete=\"off\"></el-input>\n            </el-form-item>\n            <el-form-item label=\"确认密码:\" prop=\"password2\">\n              <el-input\n                v-model=\"form.password2\"\n                type=\"password\"\n                auto-complete=\"off\"\n                ref=\"password2\"\n              ></el-input>\n            </el-form-item>\n            <el-form-item label=\"手机号:\" prop=\"mobile\">\n              <el-input v-model=\"form.mobile\"></el-input>\n            </el-form-item>\n            <el-form-item label=\"验证码:\" prop=\"sms_code\">\n              <span style=\"width: 20em;\">\n                <el-input style=\"width: 10em; margin-right:1em;\" v-model=\"form.sms_code\"></el-input>\n                <el-button\n                  style=\"width: 8em; text-align: center;\"\n                  @click=\"getSmsCode\"\n                  type=\"primary\"\n                  :disabled=\"send_flag\"\n                >{{ send_tips }}</el-button>\n              </span>\n            </el-form-item>\n            <el-form-item style=\"text-align: left;\" label-width=\"6em\" prop=\"allow\">\n              <el-checkbox v-model=\"form.allow\" true-label=\"true\">同意 “张老师的使用协议”</el-checkbox>\n            </el-form-item>\n            <el-form-item style=\"text-align: center; margin-top: 0px;\" label-width=\"0\">\n              <el-button type=\"danger\" size=\"medium\" style=\"width: 20em;\" @click=\"submit\">立即注册</el-button>\n            </el-form-item>\n          </el-form>\n        </div>\n      </el-col>\n    </el-row>\n    <!-- footer部分 -->\n    <Footer></Footer>\n  </div>\n</template>\n\n<script>\nimport Footer from \"@/components/Footer.vue\";\n\nexport default {\n  name: \"Register\",\n  data() {\n    // 校验两次密码输入是否相同，校验成功时一定要回调callback()。否则会导致全局校验通过后不继续执行\n    const check_pwd = (rule, value, callback) => {\n      if (this.form.password === value) {\n        callback();\n      } else {\n        this.form.password2 = \"\";\n        // 当校验不过时，确认密码框自动获得焦点\n        // this.$refs.password2.focus();\n        callback(new Error(\"两次输入的密码不一致，请重新输入\"));\n      }\n    };\n    const check_username = (rule, value, callback) => {\n      this.$axios\n        .get(\"users/\" + value + \"/count/\")\n        .then(res => {\n          if (res.data.count > 0) {\n            callback(new Error(\"用户名已存在\"));\n          }\n          callback();\n        })\n        .catch(err => {\n          this.$message.error(err.message);\n        });\n    };\n    const check_mobile = (rule, value, callback) => {\n      this.$axios\n        .get(\"users/\" + value + \"/count/\")\n        .then(res => {\n          if (res.data.count > 0) {\n            callback(new Error(\"该手机号已经注册\"));\n          }\n          callback();\n        })\n        .catch(err => {\n          this.$message.error(err.message);\n        });\n    };\n\n    return {\n      // 图片路径。引用本地图片时，将图片作为对象导入才能绑定\n      image: {\n        logo: require(\"../assets/images/logo.png\"),\n        register: require(\"../assets/images/register_banner.png\"),\n        interval: require(\"../assets/images/interval_line.png\")\n      },\n\n      // 发送短信按钮标识及文本\n      send_flag: false,\n      send_tips: \"发送验证码\",\n\n      // 注册表单\n      form: {\n        username: \"\",\n        password: \"\",\n        password2: \"\",\n        mobile: \"\",\n        sms_code: \"\",\n        allow: \"\"\n      },\n\n      // 表单校验规则\n      rules: {\n        username: [\n          {\n            required: true,\n            pattern: /^\\w{5,20}$/,\n            message: \"用户名应由字母数字或下划线组成的5～20位字符\",\n            trigger: \"blur\"\n          },\n          { validator: check_username, trigger: \"blur\" }\n        ],\n        password: [\n          {\n            required: true,\n            pattern: /^\\w{8,20}$/,\n            message: \"密码应由字母数字或下划线组成的8～20位字符\",\n            trigger: \"blur\"\n          }\n        ],\n        password2: [\n          {\n            required: true,\n            message: \"确认密码为必填项\",\n            trigger: \"blur\"\n          },\n          { validator: check_pwd, trigger: \"blur\" }\n        ],\n        mobile: [\n          {\n            required: true,\n            pattern: /^1[3-9]{1}\\d{9}$/,\n            message: \"手机号码不合法\",\n            trigger: \"blur\"\n          },\n          { validator: check_mobile, trigger: \"blur\" }\n        ],\n        sms_code: [\n          {\n            required: true,\n            pattern: /^[0-9]{6}$/,\n            message: \"验证码错误\",\n            trigger: \"blur\"\n          }\n        ],\n        allow: [\n          { required: true, message: \"请勾选使用协议\", trigger: \"change\" }\n        ]\n      }\n    };\n  },\n  mounted() {},\n  methods: {\n    // 获取短信验证码\n    getSmsCode() {\n      let that = this;\n      if (that.form.mobile) {\n        // 判断是否已经发了短信\n        if (that.send_flag) {\n          return;\n        }\n\n        that.$axios\n          .get(\"sms_codes/\" + that.form.mobile + \"/\")\n          .then(res => {\n            if (res.status == 200) {\n              // 短信发送成功后，置灰按钮，倒计时60秒，60秒后允许用户再次点击发送短信验证码的按钮\n              that.send_flag = true;\n              let num = 60;\n              // 设置一个计时器\n              let timer = setInterval(\n                () => {\n                  if (num == 1) {\n                    // 如果计时器到最后, 清除计时器对象\n                    clearInterval(timer);\n                    // 将点击获取验证码的按钮展示的文本回复成原始文本\n                    that.send_tips = \"发送验证码\";\n                    // 将点击按钮的onclick事件函数恢复回去\n                    that.send_flag = false;\n                  } else {\n                    num -= 1;\n                    // 展示倒计时信息\n                    that.send_tips = num + \"秒\";\n                  }\n                },\n                1000,\n                60\n              );\n            }\n          })\n      } else {\n        that.$message.error(\"请先填写手机号！\");\n      }\n    },\n    // 提交注册表单\n    submit() {\n      this.$refs.registerForm.validate(valid => {\n        if (valid) {\n          let that = this;\n          that.$axios\n            .post(\"users/\", that.form)\n            .then(res => {\n              // 注册成功时，状态码为201\n              // 注册成功后，保存token信息\n              sessionStorage.clear(); // sessionStorage关闭浏览器即清除\n              localStorage.clear(); // 永久保存\n\n              sessionStorage.token = res.data.token;\n              sessionStorage.username = res.data.username;\n              sessionStorage.user_id = res.data.id;\n\n              this.$store.commit(\"setStatus\", {\n                username: res.data.username,\n                token: res.data.token\n              });\n\n              // 跳转页面。根据跳转过来的页面，登陆成功后，跳转回去；否则进入主页\n              that.$router.replace(that.$route.query.redirect || \"/\");\n            })\n            .catch(err => {\n              that.$message.error(\"服务器错误\");\n              that.$message.error(err.message);\n            });\n        } else {\n          return false;\n        }\n      });\n    }\n  },\n  components: {\n    Footer\n  }\n};\n</script>\n\n<style scoped>\n.banner-text {\n  color: red;\n}\n.register-text {\n  font-size: 1.5em;\n  font-family: Verdana, Geneva, Tahoma, sans-serif;\n  color: grey;\n}\n.el-input {\n  width: 20em;\n}\n.el-form-item {\n  margin-top: 2em;\n}\n.el-form {\n  padding-bottom: 1em;\n}\n.el-divider {\n  margin: 0;\n  padding: 0;\n}\n</style>"],"mappings":"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","ignoreList":[]}]}