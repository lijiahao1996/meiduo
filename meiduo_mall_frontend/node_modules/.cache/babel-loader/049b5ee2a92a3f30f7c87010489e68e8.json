{"remainingRequest":"/Users/lijiahao/git-test/meiduo/meiduo_mall_frontend/node_modules/thread-loader/dist/cjs.js!/Users/lijiahao/git-test/meiduo/meiduo_mall_frontend/node_modules/babel-loader/lib/index.js!/Users/lijiahao/git-test/meiduo/meiduo_mall_frontend/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/lijiahao/git-test/meiduo/meiduo_mall_frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lijiahao/git-test/meiduo/meiduo_mall_frontend/src/views/Skus.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/lijiahao/git-test/meiduo/meiduo_mall_frontend/src/views/Skus.vue","mtime":1762018358302},{"path":"/Users/lijiahao/git-test/meiduo/meiduo_mall_frontend/babel.config.js","mtime":1762018358253},{"path":"/Users/lijiahao/git-test/meiduo/meiduo_mall_frontend/node_modules/cache-loader/dist/cjs.js","mtime":1762102178152},{"path":"/Users/lijiahao/git-test/meiduo/meiduo_mall_frontend/node_modules/thread-loader/dist/cjs.js","mtime":1762102178152},{"path":"/Users/lijiahao/git-test/meiduo/meiduo_mall_frontend/node_modules/babel-loader/lib/index.js","mtime":1762102182065},{"path":"/Users/lijiahao/git-test/meiduo/meiduo_mall_frontend/node_modules/cache-loader/dist/cjs.js","mtime":1762102178152},{"path":"/Users/lijiahao/git-test/meiduo/meiduo_mall_frontend/node_modules/vue-loader/lib/index.js","mtime":1762102181323}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:LyogZXNsaW50LWRpc2FibGUgKi8KCmltcG9ydCBDb250YWluZXIgZnJvbSAiQC9jb21wb25lbnRzL0NvbnRhaW5lci52dWUiOwppbXBvcnQgQ2F0ZWdvcnkgZnJvbSAiQC9jb21wb25lbnRzL0NhdGVnb3J5LnZ1ZSI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiU2t1cyIsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIC8vIOS4iuS4gOmhtemdouS8oOWFpXNrdeeahOWIhuexu2lkCiAgICAgIGNhdGVnb3J5X2lkOiAwLAogICAgICAvLyAgIOWIhumhteWPmOmHjwogICAgICBwYWdlOiAxLAogICAgICBwYWdlX3NpemU6IDEwLAogICAgICB0b3RhbDogMCwKICAgICAgLy8g5p+l6K+i57uT5p6cCiAgICAgIHNrdV9zZXQ6IFtdLAogICAgICB0b3Bfc2V0OiBbXSwKICAgICAgLy8gICDmjpLluo8KICAgICAgb3JkZXJpbmc6IFsiLWNyZWF0ZV90aW1lIiwgInByaWNlIiwgIi1zYWxlcyJdLAogICAgICBvcmRlcjogIi1jcmVhdGVfdGltZSIKICAgIH07CiAgfSwKICBtb3VudGVkKCkgewogICAgaWYgKHRoaXMuJHJvdXRlLnF1ZXJ5LmNhdGVnb3J5X2lkKSB7CiAgICAgIHRoaXMuY2F0ZWdvcnlfaWQgPSB0aGlzLiRyb3V0ZS5xdWVyeS5jYXRlZ29yeV9pZDsKICAgICAgdGhpcy5nZXRfc2t1KCk7CiAgICAgIHRoaXMuZ2V0X3RvcF9za3UoKTsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMuJHJvdXRlci5yZXBsYWNlKHsKICAgICAgICBuYW1lOiAnaG9tZScKICAgICAgfSk7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyDov5nmmK/liIbpobXlh73mlbAKICAgIGhhbmRsZUN1cnJlbnRDaGFuZ2UoY3VycmVudFBhZ2UpIHsKICAgICAgdGhpcy5wYWdlID0gY3VycmVudFBhZ2U7CiAgICAgIC8vICAg5q+P5qyh6aG156CB5YiH5o2i5ZCO5bCx5o6J5LiA5qyh5p+l6K+iCiAgICAgIHRoaXMuZ2V0X3NrdSgpOwogICAgfSwKICAgIC8vIOagh+etvumhteeahOmSqeWtkOWHveaVsAogICAgaGFuZGxlQ2xpY2sodGFiLCBldmVudCkgewogICAgICB0aGlzLm9yZGVyID0gdGhpcy5vcmRlcmluZ1t0YWIuaW5kZXhdOwogICAgICB0aGlzLnBhZ2UgPSAxOwogICAgICB0aGlzLmdldF9za3UoKTsKICAgIH0sCiAgICAvLyDmn6Xor6Jza3UKICAgIGdldF9za3UoKSB7CiAgICAgIGxldCB0aGF0ID0gdGhpczsKICAgICAgdGhhdC4kYXhpb3MuZ2V0KCJza3VfbGlzdC8iICsgdGhhdC5jYXRlZ29yeV9pZCArICIvc2t1cy8iLCB7CiAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICBwYWdlOiB0aGF0LnBhZ2UsCiAgICAgICAgICBwYWdlX3NpemU6IHRoYXQucGFnZV9zaXplLAogICAgICAgICAgb3JkZXJpbmc6IHRoYXQub3JkZXIKICAgICAgICB9CiAgICAgIH0pLnRoZW4ocmVzID0+IHsKICAgICAgICAvLyDlkI7nq6/lpITnkIbliIbpobUKICAgICAgICB0aGF0LnNrdV9zZXQgPSByZXMuZGF0YS5yZXN1bHRzOwogICAgICAgIHRoYXQudG90YWwgPSByZXMuZGF0YS5jb3VudDsKICAgICAgfSk7CiAgICB9LAogICAgLy8g6I635Y+W54Ot6ZSA5Lqn5ZOBCiAgICBnZXRfdG9wX3NrdSgpIHsKICAgICAgbGV0IHRoYXQgPSB0aGlzOwogICAgICB0aGF0LiRheGlvcy5nZXQoInNrdV9saXN0LyIgKyB0aGF0LmNhdGVnb3J5X2lkICsgIi90b3BzLyIpLnRoZW4ocmVzID0+IHsKICAgICAgICB0aGF0LnRvcF9zZXQgPSByZXMuZGF0YTsKICAgICAgfSk7CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgLy8g55uR5ZCs6Lev55Sx5Y+Y5YyW77yM6Kej5Yaz5ZCM5LiAdXJs5LiN5ZCM5Y+C5pWw5pe277yM6aG16Z2i5LiN5Yi35paw55qE6Zeu6aKYCiAgICAkcm91dGUodG8sIGZyb20pIHsKICAgICAgaWYgKHRvLnF1ZXJ5LmNhdGVnb3J5X2lkICE9IGZyb20ucXVlcnkuY2F0ZWdvcnlfaWQpIHsKICAgICAgICB0aGlzLmNhdGVnb3J5X2lkID0gdG8ucXVlcnkuY2F0ZWdvcnlfaWQ7CiAgICAgICAgdGhpcy5nZXRfc2t1KCk7CiAgICAgICAgdGhpcy5nZXRfdG9wX3NrdSgpOwogICAgICB9CiAgICB9CiAgfSwKICBjb21wb25lbnRzOiB7CiAgICBDb250YWluZXIsCiAgICBDYXRlZ29yeQogIH0KfTs="},{"version":3,"names":["Container","Category","name","data","category_id","page","page_size","total","sku_set","top_set","ordering","order","mounted","$route","query","get_sku","get_top_sku","$router","replace","methods","handleCurrentChange","currentPage","handleClick","tab","event","index","that","$axios","get","params","then","res","results","count","watch","to","from","components"],"sources":["src/views/Skus.vue"],"sourcesContent":["<template>\n  <Container>\n    <Category></Category>\n    <div class=\"main\">\n      <!-- 面包屑 -->\n      <el-row>\n        <el-col :span=\"2\">\n          <pre style=\"margin:0; padding: 0;\">&nbsp;</pre>\n        </el-col>\n        <el-col :span=\"4\">\n          <el-breadcrumb style=\"font-size: 0.5em; color:red;\">\n            <el-breadcrumb-item :to=\"{ path: '/' }\">首页</el-breadcrumb-item>\n            <el-breadcrumb-item>商品列表</el-breadcrumb-item>\n          </el-breadcrumb>\n        </el-col>\n      </el-row>\n      <!-- sku信息 -->\n      <el-row>\n        <el-col :span=\"2\">\n          <pre style=\"margin:0; padding: 0;\">&nbsp;</pre>\n        </el-col>\n        <el-col :span=\"4\">\n          <div class=\"hot\">\n            <p class=\"hot_title\">热销排行</p>\n            <div :span=\"4\" v-for=\"item in top_set\" :key=\"item\" class=\"hot_detail_box\">\n              <span class=\"stock\">剩余{{ item.comments }}件</span>\n              <el-link\n                :underline=\"false\"\n                @click=\"$router.push({name: 'sku_detail', query:{sku_id: item.id}})\"\n              >\n                <el-image :src=\"item.default_image_url\" :alt=\"item.caption\"></el-image>\n              </el-link>\n              <div class=\"text\" :title=\"item.name\">{{ item.name }}</div>\n              <div style=\"color:red;\">{{ item.price }}</div>\n            </div>\n          </div>\n        </el-col>\n        <el-col :span=\"16\">\n          <div>\n            <el-tabs type=\"card\" @tab-click=\"handleClick\">\n              <el-tab-pane label=\"默认\"></el-tab-pane>\n              <el-tab-pane label=\"价格\"></el-tab-pane>\n              <el-tab-pane label=\"人气\"></el-tab-pane>\n            </el-tabs>\n          </div>\n          <div style=\"min-height: 20em; width: 58em;\">\n            <el-col :span=\"4\" v-for=\"item in sku_set\" :key=\"item\" class=\"detail_box\">\n              <span class=\"stock\">剩余{{ item.stock }}件</span>\n              <el-link\n                :underline=\"false\"\n                @click=\"$router.push({name: 'sku_detail', query:{sku_id: item.id}})\"\n              >\n                <el-image :src=\"item.default_image_url\"></el-image>\n              </el-link>\n              <div class=\"text\" :title=\"item.name\">{{ item.name }}</div>\n              <div style=\"color:red;\">\n                {{ item.price }}\n                <span class=\"comments\">{{ item.comments }}条评价</span>\n              </div>\n            </el-col>\n          </div>\n        </el-col>\n      </el-row>\n      <!-- 分页 -->\n      <el-row>\n        <div style=\"text-align: center;\">\n          <el-pagination\n            background\n            @current-change=\"handleCurrentChange\"\n            :page-size=\"page_size\"\n            :current-page=\"page\"\n            layout=\"prev, pager, next\"\n            :total=\"total\"\n          ></el-pagination>\n        </div>\n      </el-row>\n    </div>\n  </Container>\n</template>\n<script>\n/* eslint-disable */\n\nimport Container from \"@/components/Container.vue\";\nimport Category from \"@/components/Category.vue\";\n\nexport default {\n  name: \"Skus\",\n  data() {\n    return {\n      // 上一页面传入sku的分类id\n      category_id: 0,\n      //   分页变量\n      page: 1,\n      page_size: 10,\n      total: 0,\n\n      // 查询结果\n      sku_set: [],\n      top_set: [],\n\n      //   排序\n      ordering: [\"-create_time\", \"price\", \"-sales\"],\n      order: \"-create_time\"\n    };\n  },\n  mounted() {\n    if (this.$route.query.category_id) {\n      this.category_id = this.$route.query.category_id;\n      this.get_sku();\n      this.get_top_sku();\n    }else{\n      this.$router.replace({name: 'home'})\n    }\n  },\n  methods: {\n    // 这是分页函数\n    handleCurrentChange(currentPage) {\n      this.page = currentPage;\n      //   每次页码切换后就掉一次查询\n      this.get_sku();\n    },\n    // 标签页的钩子函数\n    handleClick(tab, event) {\n      this.order = this.ordering[tab.index];\n      this.page = 1;\n      this.get_sku();\n    },\n\n    // 查询sku\n    get_sku() {\n      let that = this;\n      that.$axios\n        .get(\"sku_list/\" + that.category_id + \"/skus/\", {\n          params: {\n            page: that.page,\n            page_size: that.page_size,\n            ordering: that.order\n          }\n        })\n        .then(res => {\n          // 后端处理分页\n          that.sku_set = res.data.results;\n          that.total = res.data.count;\n        });\n    },\n\n    // 获取热销产品\n    get_top_sku() {\n      let that = this;\n      that.$axios.get(\"sku_list/\" + that.category_id + \"/tops/\").then(res => {\n        that.top_set = res.data;\n      });\n    }\n  },\n  watch: {\n    // 监听路由变化，解决同一url不同参数时，页面不刷新的问题\n    $route(to, from) {\n      if (to.query.category_id != from.query.category_id) {\n        this.category_id = to.query.category_id;\n        this.get_sku();\n        this.get_top_sku();\n      }\n    }\n  },\n  components: {\n    Container,\n    Category\n  }\n};\n</script>\n<style scoped>\n.main {\n  margin-top: 1em;\n}\n.main .el-row {\n  margin-top: 1em;\n  margin-bottom: 0;\n}\n.hot {\n  padding-bottom: 0.5em;\n  text-align: center;\n  background-color: rgb(166, 240, 182);\n}\n.hot_title {\n  margin: 0;\n  height: 2em;\n  line-height: 2em;\n  font-size: 1.2em;\n  background-color: hotpink;\n}\n.hot_detail_box {\n  margin: 0.5em;\n  margin-left: 2.1em;\n  background-color: rgb(19, 236, 229);\n  width: 10em;\n  text-align: left;\n}\n.detail_box {\n  width: 10em;\n  margin: 0.5em 0.75em;\n  padding: 0.5em 0.5em;\n}\n\n.text {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  font-size: 0.5em;\n  color: grey;\n}\n.stock {\n  position: absolute;\n  z-index: 8;\n  font-size: 0.5em;\n  color: rgb(133, 131, 131);\n  background-color: rgb(217, 224, 224);\n}\n.comments {\n  margin-left: 2em;\n  font-size: 0.5em;\n  color: grey;\n}\n</style>"],"mappings":"AAgFA;;AAEA,OAAAA,SAAA;AACA,OAAAC,QAAA;AAEA;EACAC,IAAA;EACAC,KAAA;IACA;MACA;MACAC,WAAA;MACA;MACAC,IAAA;MACAC,SAAA;MACAC,KAAA;MAEA;MACAC,OAAA;MACAC,OAAA;MAEA;MACAC,QAAA;MACAC,KAAA;IACA;EACA;EACAC,QAAA;IACA,SAAAC,MAAA,CAAAC,KAAA,CAAAV,WAAA;MACA,KAAAA,WAAA,QAAAS,MAAA,CAAAC,KAAA,CAAAV,WAAA;MACA,KAAAW,OAAA;MACA,KAAAC,WAAA;IACA;MACA,KAAAC,OAAA,CAAAC,OAAA;QAAAhB,IAAA;MAAA;IACA;EACA;EACAiB,OAAA;IACA;IACAC,oBAAAC,WAAA;MACA,KAAAhB,IAAA,GAAAgB,WAAA;MACA;MACA,KAAAN,OAAA;IACA;IACA;IACAO,YAAAC,GAAA,EAAAC,KAAA;MACA,KAAAb,KAAA,QAAAD,QAAA,CAAAa,GAAA,CAAAE,KAAA;MACA,KAAApB,IAAA;MACA,KAAAU,OAAA;IACA;IAEA;IACAA,QAAA;MACA,IAAAW,IAAA;MACAA,IAAA,CAAAC,MAAA,CACAC,GAAA,eAAAF,IAAA,CAAAtB,WAAA;QACAyB,MAAA;UACAxB,IAAA,EAAAqB,IAAA,CAAArB,IAAA;UACAC,SAAA,EAAAoB,IAAA,CAAApB,SAAA;UACAI,QAAA,EAAAgB,IAAA,CAAAf;QACA;MACA,GACAmB,IAAA,CAAAC,GAAA;QACA;QACAL,IAAA,CAAAlB,OAAA,GAAAuB,GAAA,CAAA5B,IAAA,CAAA6B,OAAA;QACAN,IAAA,CAAAnB,KAAA,GAAAwB,GAAA,CAAA5B,IAAA,CAAA8B,KAAA;MACA;IACA;IAEA;IACAjB,YAAA;MACA,IAAAU,IAAA;MACAA,IAAA,CAAAC,MAAA,CAAAC,GAAA,eAAAF,IAAA,CAAAtB,WAAA,aAAA0B,IAAA,CAAAC,GAAA;QACAL,IAAA,CAAAjB,OAAA,GAAAsB,GAAA,CAAA5B,IAAA;MACA;IACA;EACA;EACA+B,KAAA;IACA;IACArB,OAAAsB,EAAA,EAAAC,IAAA;MACA,IAAAD,EAAA,CAAArB,KAAA,CAAAV,WAAA,IAAAgC,IAAA,CAAAtB,KAAA,CAAAV,WAAA;QACA,KAAAA,WAAA,GAAA+B,EAAA,CAAArB,KAAA,CAAAV,WAAA;QACA,KAAAW,OAAA;QACA,KAAAC,WAAA;MACA;IACA;EACA;EACAqB,UAAA;IACArC,SAAA;IACAC;EACA;AACA","ignoreList":[]}]}