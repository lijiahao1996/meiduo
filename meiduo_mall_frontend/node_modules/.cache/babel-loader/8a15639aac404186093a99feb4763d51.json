{"remainingRequest":"/Users/lijiahao/git-test/meiduo/meiduo_mall_frontend/node_modules/thread-loader/dist/cjs.js!/Users/lijiahao/git-test/meiduo/meiduo_mall_frontend/node_modules/babel-loader/lib/index.js!/Users/lijiahao/git-test/meiduo/meiduo_mall_frontend/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/lijiahao/git-test/meiduo/meiduo_mall_frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lijiahao/git-test/meiduo/meiduo_mall_frontend/src/components/Detail.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/lijiahao/git-test/meiduo/meiduo_mall_frontend/src/components/Detail.vue","mtime":1762018358296},{"path":"/Users/lijiahao/git-test/meiduo/meiduo_mall_frontend/babel.config.js","mtime":1762018358253},{"path":"/Users/lijiahao/git-test/meiduo/meiduo_mall_frontend/node_modules/cache-loader/dist/cjs.js","mtime":1762102178152},{"path":"/Users/lijiahao/git-test/meiduo/meiduo_mall_frontend/node_modules/thread-loader/dist/cjs.js","mtime":1762102178152},{"path":"/Users/lijiahao/git-test/meiduo/meiduo_mall_frontend/node_modules/babel-loader/lib/index.js","mtime":1762102182065},{"path":"/Users/lijiahao/git-test/meiduo/meiduo_mall_frontend/node_modules/cache-loader/dist/cjs.js","mtime":1762102178152},{"path":"/Users/lijiahao/git-test/meiduo/meiduo_mall_frontend/node_modules/vue-loader/lib/index.js","mtime":1762102181323}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:LyogZXNsaW50LWRpc2FibGUgKi8KZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJEZXRhaWwiLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICAvLyDmnI3liqHlmajov5Tlm57nmoTor6bnu4bkv6Hmga8KICAgICAgdXNlcm5hbWU6ICIiLAogICAgICBtb2JpbGU6ICIiLAogICAgICBlbWFpbDogIiIsCiAgICAgIC8vIOiupOivgemCrueusemAu+i+keWPguaVsAogICAgICBoYXM6IGZhbHNlLAogICAgICAvLyDmmK/lkKbmnInpgq7nrrEKICAgICAgZW1haWxfYWN0aXZlOiBmYWxzZSwKICAgICAgLy8g5piv5ZCm5bey6K6k6K+BCiAgICAgIHNob3c6IGZhbHNlLAogICAgICAvLyDmlLblkKblsZXnpLrpgq7nrrHnu5HlrprmoI8KCiAgICAgIC8v57uR5a6a6YKu566x6L6T5YWl5qGGCiAgICAgIGlucHV0X2VtYWlsOiAiIiwKICAgICAgLy8g5pyA6L+R5rWP6KeI6K6w5b2VCiAgICAgIHNrdV9zZXQ6IFtdCiAgICB9OwogIH0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuZ2V0X3VzZXJfaW5mbygpOwogICAgdGhpcy5nZXRfYnJvd3NpbmdfaGlzdG9yeSgpOwogIH0sCiAgbWV0aG9kczogewogICAgLy8g6I635Y+W55So5oi35L+h5oGvCiAgICBnZXRfdXNlcl9pbmZvKCkgewogICAgICBsZXQgdGhhdCA9IHRoaXM7CiAgICAgIHRoYXQuJGF4aW9zLmdldCgidXNlci8iLCB7fSkudGhlbihyZXMgPT4gewogICAgICAgIC8vIOWKoOi9veeUqOaIt+S/oeaBrwogICAgICAgIHRoYXQudXNlcm5hbWUgPSByZXMuZGF0YS51c2VybmFtZTsKICAgICAgICB0aGF0Lm1vYmlsZSA9IHJlcy5kYXRhLm1vYmlsZTsKICAgICAgICBpZiAocmVzLmRhdGEuZW1haWwpIHsKICAgICAgICAgIHRoYXQuZW1haWwgPSByZXMuZGF0YS5lbWFpbDsKICAgICAgICAgIHRoYXQuaGFzID0gdHJ1ZTsKICAgICAgICAgIGlmIChyZXMuZGF0YS5lbWFpbF9hY3RpdmUgPT09IHRydWUpIHsKICAgICAgICAgICAgdGhhdC5lbWFpbF9hY3RpdmUgPSB0cnVlOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgLy/nu5Hlrprpgq7nrrEKICAgIGJpbmRfZW1haWwoKSB7CiAgICAgIGxldCB0aGF0ID0gdGhpczsKICAgICAgaWYgKHRoYXQuZW1haWwpIHsKICAgICAgICB0aGF0LmlucHV0X2VtYWlsID0gdGhhdC5lbWFpbDsKICAgICAgfQogICAgICAvLyDmoKHpqozpgq7nrrHmoLzlvI8KICAgICAgbGV0IHJlID0gL15bYS16MC05XVtcd1wuXC1dKkBbYS16MC05XC1dKyhcLlthLXpdezIsNX0pezEsMn0kLzsKICAgICAgaWYgKHJlLnRlc3QodGhhdC5pbnB1dF9lbWFpbCkpIHsKICAgICAgICAvL+mCrueuseagvOW8j+agoemqjOmAmui/h+WQju+8jOWQkeWQjuerr+WPkei1t+ivt+axggogICAgICAgIHRoYXQuJGF4aW9zLnB1dCgiZW1haWwvIiwgewogICAgICAgICAgZW1haWw6IHRoYXQuaW5wdXRfZW1haWwKICAgICAgICB9LCB7CiAgICAgICAgICAvLyDlkJHlkI7nq6/kvKDpgJJKV1QgdG9rZW7nmoTmlrnms5UKICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogIkpXVCAiICsgdGhhdC4kc3RvcmUuc3RhdGUudG9rZW4gLy8g5pC65bimdG9rZW7orr/pl67mjqXlj6MKICAgICAgICAgIH0KICAgICAgICB9KS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAvLyDliqDovb3nlKjmiLfkv6Hmga8KICAgICAgICAgIGlmICh0aGF0LmlucHV0X2VtYWlsID09PSByZXMuZGF0YS5lbWFpbCkgewogICAgICAgICAgICB0aGF0LiRub3RpZnkoewogICAgICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIiwKICAgICAgICAgICAgICB0aXRsZTogIumCrueusee7keWumuaIkOWKnyIsCiAgICAgICAgICAgICAgbWVzc2FnZTogIuivt+azqOaEj+afpeaUtumCruS7tui/m+ihjOmqjOivge+8jOmqjOivgemCruS7tuacieaViOacn+S4ujXliIbpkp8iCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB0aGF0LmVtYWlsID0gcmVzLmRhdGEuZW1haWw7CiAgICAgICAgICAgIHRoYXQuaGFzID0gdHJ1ZTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGF0LiRub3RpZnkuZXJyb3IoewogICAgICAgICAgdGl0bGU6ICLnu5HlrprlpLHotKUiLAogICAgICAgICAgbWVzc2FnZTogIumCrueuseagvOW8j+mUmeivryIKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIC8vIOiOt+WPluacgOi/kea1j+iniOiusOW9lQogICAgZ2V0X2Jyb3dzaW5nX2hpc3RvcnkoKSB7CiAgICAgIGxldCB0aGF0ID0gdGhpczsKICAgICAgdGhhdC4kYXhpb3MuZ2V0KCJzZXRfaGlzdG9yeS8iKS50aGVuKHJlcyA9PiB7CiAgICAgICAgdGhhdC5za3Vfc2V0ID0gcmVzLmRhdGE7CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"names":["name","data","username","mobile","email","has","email_active","show","input_email","sku_set","mounted","get_user_info","get_browsing_history","methods","that","$axios","get","then","res","bind_email","re","test","put","headers","Authorization","$store","state","token","$notify","type","title","message","error"],"sources":["src/components/Detail.vue"],"sourcesContent":["<template>\n  <!-- 将子页面放在div中，实现滑动效果 -->\n  <div style=\"height: 32em; overflow:auto; width: 50em;\">\n      <el-row>\n        <p style=\"margin-top: 0;\">详情信息</p>\n        <el-divider></el-divider>\n        <div class=\"info\">\n          <el-col :span=\"1\">\n            <pre style=\"margin:0; padding: 0;\">&nbsp;</pre>\n          </el-col>\n          <!-- 用户详情 -->\n          <el-col :span=\"2\">\n            <p>用户名：</p>\n            <p>手机号：</p>\n            <p>Email：</p>\n          </el-col>\n          <el-col :span=\"14\" style=\"text-align: left;\">\n            <p>{{ username }}</p>\n            <p>{{ mobile }}</p>\n            <p>\n              <span v-if=\"has\">\n                {{ email }}&nbsp;\n                <span v-if=\"email_active\">\n                  <el-tag type=\"success\" effect=\"dark\" size=\"mini\">已认证</el-tag>\n                </span>\n                <span v-else>\n                  <span style=\"font-size: 0.5em; color: red;\">未收到邮件？</span>\n                  <el-button size=\"mini\" type=\"info\" @click=\"bind_email\">重新发送</el-button>\n                </span>\n              </span>\n              <span v-else>\n                <span v-if=\"show\">\n                  <el-input v-model=\"input_email\" placeholder=\"请输入邮箱\" size=\"mini\"></el-input>&nbsp;\n                  <el-button type=\"primary\" @click=\"bind_email\">确认</el-button>\n                  <el-button type=\"info\" @click=\"show = false\">取消</el-button>\n                </span>\n                <span v-else>\n                  <span style=\"font-size: 0.5em; color: red;\">当前未绑定邮箱</span>&nbsp;\n                  <el-button type=\"info\" @click=\"show = true\">绑定</el-button>\n                </span>\n              </span>\n            </p>\n          </el-col>\n        </div>\n      </el-row>\n      <el-row>\n        <p>最近浏览</p>\n        <el-divider></el-divider>\n        <el-col :span=\"4\" v-for=\"item in sku_set\" :key=\"item.id\" class=\"detail_box\">\n          <el-link\n            :underline=\"false\"\n            @click=\"$router.push({name: 'sku_detail', query:{sku_id: item.id}})\"\n          >\n            <el-image :src=\"item.default_image_url\"></el-image>\n          </el-link>\n          <div class=\"text\" :title=\"item.name\">{{ item.name }}</div>\n          <div style=\"color:red;\">\n            {{ item.price }}\n            <span class=\"comments\">{{ item.comments }}条评价</span>\n          </div>\n        </el-col>\n      </el-row>\n    </div>\n</template>\n<script>\n/* eslint-disable */\nexport default {\n  name: \"Detail\",\n  data() {\n    return {\n      // 服务器返回的详细信息\n      username: \"\",\n      mobile: \"\",\n      email: \"\",\n\n      // 认证邮箱逻辑参数\n      has: false, // 是否有邮箱\n      email_active: false, // 是否已认证\n      show: false, // 收否展示邮箱绑定栏\n\n      //绑定邮箱输入框\n      input_email: \"\",\n\n      // 最近浏览记录\n      sku_set: []\n    };\n  },\n  mounted() {\n    this.get_user_info();\n    this.get_browsing_history();\n  },\n  methods: {\n    // 获取用户信息\n    get_user_info() {\n      let that = this;\n      that.$axios.get(\"user/\", {}).then(res => {\n        // 加载用户信息\n        that.username = res.data.username;\n        that.mobile = res.data.mobile;\n        if (res.data.email) {\n          that.email = res.data.email;\n          that.has = true;\n          if (res.data.email_active === true) {\n            that.email_active = true;\n          }\n        }\n      });\n    },\n\n    //绑定邮箱\n    bind_email() {\n      let that = this;\n      if (that.email) {\n        that.input_email = that.email;\n      }\n      // 校验邮箱格式\n      let re = /^[a-z0-9][\\w\\.\\-]*@[a-z0-9\\-]+(\\.[a-z]{2,5}){1,2}$/;\n      if (re.test(that.input_email)) {\n        //邮箱格式校验通过后，向后端发起请求\n        that.$axios\n          .put(\n            \"email/\",\n            { email: that.input_email },\n            {\n              // 向后端传递JWT token的方法\n              headers: {\n                Authorization: \"JWT \" + that.$store.state.token // 携带token访问接口\n              }\n            }\n          )\n          .then(res => {\n            // 加载用户信息\n            if (that.input_email === res.data.email) {\n              that.$notify({\n                type: \"success\",\n                title: \"邮箱绑定成功\",\n                message: \"请注意查收邮件进行验证，验证邮件有效期为5分钟\"\n              });\n              that.email = res.data.email;\n              that.has = true;\n            }\n          });\n      } else {\n        that.$notify.error({\n          title: \"绑定失败\",\n          message: \"邮箱格式错误\"\n        });\n      }\n    },\n\n    // 获取最近浏览记录\n    get_browsing_history() {\n      let that = this;\n      that.$axios.get(\"set_history/\").then(res => {\n        that.sku_set = res.data;\n      });\n    }\n  }\n};\n</script>\n<style scoped>\n.info {\n  font-size: 1em;\n  height: 8em;\n  text-align: right;\n  background-color: rgb(243, 240, 240);\n  border-radius: 3px;\n}\n.info .el-button {\n  font-size: 1em;\n  height: 1.4em;\n  padding-top: 0.2em;\n  padding-left: 0.3em;\n  padding-right: 0.3em;\n  margin-left: 0.5em;\n}\n.info .el-input {\n  width: 20em;\n  margin-right: 1em;\n}\n.el-divider {\n  margin: 0.5em;\n  margin-left: 0;\n  padding: 0;\n}\n.detail_box {\n  width: 9em;\n  margin: 0.5em 0.5em;\n  padding: 0.5em 0.5em;\n}\n\n.text {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  font-size: 0.5em;\n  color: grey;\n}\n\n.comments {\n  margin-left: 2em;\n  font-size: 0.5em;\n  color: grey;\n}\n</style>"],"mappings":"AAiEA;AACA;EACAA,IAAA;EACAC,KAAA;IACA;MACA;MACAC,QAAA;MACAC,MAAA;MACAC,KAAA;MAEA;MACAC,GAAA;MAAA;MACAC,YAAA;MAAA;MACAC,IAAA;MAAA;;MAEA;MACAC,WAAA;MAEA;MACAC,OAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,aAAA;IACA,KAAAC,oBAAA;EACA;EACAC,OAAA;IACA;IACAF,cAAA;MACA,IAAAG,IAAA;MACAA,IAAA,CAAAC,MAAA,CAAAC,GAAA,cAAAC,IAAA,CAAAC,GAAA;QACA;QACAJ,IAAA,CAAAZ,QAAA,GAAAgB,GAAA,CAAAjB,IAAA,CAAAC,QAAA;QACAY,IAAA,CAAAX,MAAA,GAAAe,GAAA,CAAAjB,IAAA,CAAAE,MAAA;QACA,IAAAe,GAAA,CAAAjB,IAAA,CAAAG,KAAA;UACAU,IAAA,CAAAV,KAAA,GAAAc,GAAA,CAAAjB,IAAA,CAAAG,KAAA;UACAU,IAAA,CAAAT,GAAA;UACA,IAAAa,GAAA,CAAAjB,IAAA,CAAAK,YAAA;YACAQ,IAAA,CAAAR,YAAA;UACA;QACA;MACA;IACA;IAEA;IACAa,WAAA;MACA,IAAAL,IAAA;MACA,IAAAA,IAAA,CAAAV,KAAA;QACAU,IAAA,CAAAN,WAAA,GAAAM,IAAA,CAAAV,KAAA;MACA;MACA;MACA,IAAAgB,EAAA;MACA,IAAAA,EAAA,CAAAC,IAAA,CAAAP,IAAA,CAAAN,WAAA;QACA;QACAM,IAAA,CAAAC,MAAA,CACAO,GAAA,CACA,UACA;UAAAlB,KAAA,EAAAU,IAAA,CAAAN;QAAA,GACA;UACA;UACAe,OAAA;YACAC,aAAA,WAAAV,IAAA,CAAAW,MAAA,CAAAC,KAAA,CAAAC,KAAA;UACA;QACA,CACA,EACAV,IAAA,CAAAC,GAAA;UACA;UACA,IAAAJ,IAAA,CAAAN,WAAA,KAAAU,GAAA,CAAAjB,IAAA,CAAAG,KAAA;YACAU,IAAA,CAAAc,OAAA;cACAC,IAAA;cACAC,KAAA;cACAC,OAAA;YACA;YACAjB,IAAA,CAAAV,KAAA,GAAAc,GAAA,CAAAjB,IAAA,CAAAG,KAAA;YACAU,IAAA,CAAAT,GAAA;UACA;QACA;MACA;QACAS,IAAA,CAAAc,OAAA,CAAAI,KAAA;UACAF,KAAA;UACAC,OAAA;QACA;MACA;IACA;IAEA;IACAnB,qBAAA;MACA,IAAAE,IAAA;MACAA,IAAA,CAAAC,MAAA,CAAAC,GAAA,iBAAAC,IAAA,CAAAC,GAAA;QACAJ,IAAA,CAAAL,OAAA,GAAAS,GAAA,CAAAjB,IAAA;MACA;IACA;EACA;AACA","ignoreList":[]}]}